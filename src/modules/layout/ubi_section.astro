---
import { getCollection } from "astro:content";
import IframeMap from "./components/iframeMap.astro";

const [currentLocation] = await getCollection("location");

if (!currentLocation) return;

const { map: mapConfig, badge, title, details, cta } = currentLocation.data;
---

<section id="ubicacion" class="location-section">
  <div class="container location-grid">
    <div class="location-info reveal">
      <span class="address-tag scan-observe">{badge}</span>

      <h2 class="location-title">
        {title.text.replace(title.highlight, "")}
        <span class="text-accent">{title.highlight}</span>
      </h2>

      <ul class="location-details">
        {
          details.map((detail) => (
            <li>
              <span class="detail-icon">{detail.icon}</span>
              <div>
                <>
                  <strong>{detail.label}</strong>
                  <br />
                </>
                {detail.content.map((line) => (
                  <>
                    {line}
                    <br />
                  </>
                ))}
              </div>
            </li>
          ))
        }
      </ul>

      <a href={cta.url} target={cta.target} class="btn btn-primary">
        {cta.text}
      </a>
    </div>

    {mapConfig && <IframeMap jaz={mapConfig} />}
  </div>
</section>

<style>
  @layer components {
    .location-section {
      background: var(--color-bg-main);
      padding: 100px 0;
      position: relative;
    }

    .location-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 40px;
      align-items: center;
    }

    @media (min-width: 992px) {
      .location-grid {
        grid-template-columns: 1fr 1.5fr;
      }
    }

    /* Tarjeta de Informaci√≥n */
    .location-info {
      padding-right: 20px;
    }

    .address-tag {
      color: var(--color-accent);
      text-transform: uppercase;
      letter-spacing: 2px;
      font-weight: 700;
      font-size: 0.8rem;
      margin-bottom: 15px;
      display: block;
    }

    .location-title {
      font-size: clamp(2.5rem, 4vw, 3.5rem);
      line-height: 1.1;
      margin-bottom: 25px;
      font-weight: 800;
    }

    .location-details {
      list-style: none;
      margin-bottom: 40px;
    }

    .location-details li {
      margin-bottom: 20px;
      display: flex;
      align-items: flex-start;
      gap: 15px;
      color: var(--color-text-muted);
    }

    .detail-icon {
      color: var(--color-accent);
      font-size: 1.2rem;
      margin-top: 3px;
    }
  }
</style>
